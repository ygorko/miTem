(()=>{let p={name:"miTem",version:"1.0.10"},c={statement:/\{%([\s\S]+?)%\}/g,expression:/\{\{([\s\S]+?)\}\}/g,filter_param:/([\s\S]+?)(\(([^)]*)\))$/},f=(p.partials={},p.registerPartial=(e,t)=>{p.partials[e]="string"==typeof t?p.compile(t):t},{partial:(...e)=>`o+=m.partials['${e[1]}'].apply(null, [${void 0!==e[2]?"c."+e[2]:"c"}]);`,if:(...e)=>`if(c.${e[1]}){`,else:(...e)=>"}else "+("if"===e[1]?f.if("",e[2]):"{"),endif:()=>"}",endfor:()=>"}c=c.loop.parent;",for:(...e)=>`if (typeof c.${e[3]}=== 'undefined') return '';const t={loop:{parent:c,length:c.${e[3]}.length}};c=t;var i=0;if(typeof c.loop.parent.${e[3]}.length === 'undefined'){c.loop.length=m.objSize(c.loop.parent.${e[3]})}for(${e[1]} in c.loop.parent.${e[3]}){if (!c.loop.parent.${e[3]}.hasOwnProperty(${e[1]}))continue;c.${e[1]}=c.loop.parent.${e[3]}[${e[1]}];c.loop.last=(i===c.loop.length-1);c.loop.first=(i===0);c.loop.key=${e[1]};c.loop.index0=i; c.loop.index=i+1;i++;`});p.var=function(e){this.val=e},p.var.prototype.applyFilter=function(e,t){let r;if(void 0!==p.filters[e])r=p.filters[e].apply(this.val,t);else{if(void 0===this.val[e])throw new Error(`Filter ${e} is not defined`);r=this.val[e].apply(this.val,t)}return this.val=r,this},p.var.prototype.toString=function(){return this.val},p.objSize=e=>Object.keys(e).length,p.restoreDefaultSettings=function(){p.settings={stopOnError:!1}},p.restoreDefaultSettings(),p.filters={default(e){return void 0===this?e:this},abs(){return Math.abs(this)},capitalize(){return this.charAt(0).toUpperCase()+this.slice(1)},nl2br(){return this.replace(/\n/gi,"<br />")},title(){return this.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}},"undefined"!=typeof module&&module.exports?module.exports=p:"function"==typeof define&&define.amd?define(()=>p):window.miTem=p,p.processFilters=e=>{e=e.trim().split("|");let t=`(new m.var(c.${e[0]}))`;e=e.slice(1);let r;return e.forEach(e=>{e=(r=c.filter_param.exec(e.trim())||["",e.trim(),"",""])[3].split(",");t+=`.applyFilter('${r[1]}', [${e.join(",")}])`}),t+=".toString()"},p.compile=e=>{let i="var c=d;var m=this.miTem;var o='";e=e.split("\n");function r(...e){var t=e[1].trim().split(" ");let r="';";return void 0===f[t[0]]?(console.error(`Line: ${s}; Error in ${e[0]}; Unknown tag '${t[0]}'`),l=!1):r+=f[t[0]].apply(null,t),r+="o+='"}function o(...e){var t=e[1];let r=p.processFilters(t.replace(/\\'/gi,"'"));return r=`(function(){var s=this,t;s.m=m;try{return ${r}}catch(e){console.error('Line: ${parseInt(s,10)+1}; Error in ${e[0]}');`,p.settings.stopOnError&&(r+="throw e;"),`'+${r+="}})()"}+'`}let n="",l=!0,s,a;return e.forEach((e,t)=>{s=t,a=e,i+=n;t=a.replace(/'/gi,"\\'");i+=t.replace(c.statement,r).replace(c.expression,o),n="'+\"\\n\"+'"}),i+="'; return o;",l?e=>{let t;try{t=new Function("d",i)}catch(e){console.error(i),console.error(e)}var r={};return r.miTem=p,t.apply(r,[e])}:()=>""}})();